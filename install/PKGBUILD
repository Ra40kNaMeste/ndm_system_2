pkgname=ndm-system
pkgver=1.0
pkgrel=1
arch=('x86_64')
license=('GPL')

pkgdesc="test task for ndm system company"
url="https://github.com/Ra40kNaMeste/ndm_system_2/tree/main/src"

depends=('boost-libs')
makedepends=('git' 'make' 'gcc')
provides=('ndmserver')

_commit="6809e36ebf7af0ec1553a20c3b66ebc2e163f432"
source=(${pkgname}::git+https://github.com/Ra40kNaMeste/ndm_system_2.git#commit=${_commit})
sha256sums=('SKIP')
pkgver() {
  cd ${pkgname}
  git describe --tags | sed 's/^v//;s/-/+/g'
}
build() {
  cd ${pkgname}
  make
}
package() {
  mkdir -p $pkgdir/usr/bin
  mkdir -p $pkgdir/usr/lib/systemd/system
  cd ${pkgname}
  make DESTDIR="$pkgdir" install
}
